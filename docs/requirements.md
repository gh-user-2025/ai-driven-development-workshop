# 工場設備管理アプリ 要件定義書

## 📋 文書概要

本文書は、工場設備管理アプリケーションの機能要件および非機能要件を定義したものです。
既存のユースケースドキュメントおよびヒアリング結果に基づいて、詳細な要件を整理・体系化しています。

---

## 🎯 機能要件

### 1. アプリケーション開発の目的や背景

#### 開発目的
工場内の設備の稼働状況を効率的に監視し、予防保全とダウンタイム削減を実現するシステムの構築により、生産性向上とコスト最適化を図る。

#### 背景
現在の工場設備監視における主要な課題：
- **監視対象の多さ**: 工場内に数十から数百の生産設備が存在し、それぞれが異なる特性と監視要件を持つ
- **人手不足とスキル不足**: 専門知識を持つ技術者の確保困難と、監視業務の属人化
- **データ分析の困難さ**: 収集したデータから有用な情報を抽出し、適切な判断を行うことの困難さ

#### 期待される効果
- ダウンタイム削減：リアルタイム監視により設備停止時間を30%削減
- メンテナンス効率化：予防保全により設備寿命を20%延長
- 生産性向上：データ分析に基づく運用改善により生産効率を15%向上
- コスト最適化：設備運用コストの可視化により運用費を10%削減

### 2. 対象ユーザーや利用シーン

#### 主要ユーザー

##### 監視オペレーター
- **利用シーン**: 24時間体制での設備監視、異常アラート対応
- **主要業務**: リアルタイム監視ダッシュボードでの設備状況確認、異常検知時の初期対応
- **利用頻度**: 常時（シフト制）

##### 設備メンテナンス技術者
- **利用シーン**: 予防保全計画の確認、現場での設備点検・修理作業
- **主要業務**: メンテナンススケジュール管理、故障履歴の記録、部品交換作業
- **利用頻度**: 日常的（作業指示に応じて）

##### 生産管理者
- **利用シーン**: 生産計画の策定、設備稼働状況の管理
- **主要業務**: 設備稼働率の確認、生産スケジュール調整、投資計画策定
- **利用頻度**: 日次・週次・月次レポート確認

##### 設備管理責任者
- **利用シーン**: 戦略的な設備管理方針の決定、予算管理
- **主要業務**: 設備投資計画、保全戦略の策定、コスト分析
- **利用頻度**: 週次・月次の管理レポート確認

#### 利用デバイス
- **デスクトップPC**: 詳細分析・設定変更（管理者・技術者）
- **タブレット**: 現場での状況確認・作業記録（技術者）
- **スマートフォン**: 緊急アラート受信・簡易状況確認（全ユーザー）

### 3. 主要な機能やサービス

#### 3.1 リアルタイム設備監視機能
- **設備データ収集**: IoTセンサーによる1分間隔での自動データ収集
  - 温度、振動、圧力、電流値、回転数の測定
  - データのクラウドへのリアルタイム送信
- **リアルタイム分析**: 受信データの即座の分析と閾値比較
- **監視ダッシュボード**: 全設備の現在状況の可視化
  - 設備ステータス表示（正常/注意/異常）
  - リアルタイムグラフでのトレンド表示
- **異常検知・アラート**: 閾値超過時の即座のアラート発生
  - 音声、画面表示、メール、SMSでの通知
  - 推奨対応アクションの提示

#### 3.2 予知保全管理機能
- **故障予測分析**: 機械学習による設備劣化予測
  - 過去の故障データとセンサーデータの分析
  - 故障確率の計算と劣化進行度の数値化
- **保全計画自動生成**: データに基づく最適なメンテナンス計画
  - 故障リスクに基づく優先度設定
  - 最適なメンテナンス時期の算出
  - 必要部品と作業時間の見積もり
- **スケジュール管理**: 保全計画の確認と調整機能
  - 生産スケジュールとの調整
  - リソース（人員、部品）の可用性確認

#### 3.3 異常対応ワークフロー機能
- **初期対応支援**: アラート内容の確認と初期診断
- **エスカレーション管理**: 緊急度レベルに応じた対応フロー
  - レベル1（軽微）: オペレーターによる遠隔対応
  - レベル2（中程度）: 現場技術者派遣
  - レベル3（重大）: 管理責任者および生産停止判断
- **対応履歴管理**: 詳細な対応記録と再発防止策の管理

#### 3.4 データ分析・レポート機能
- **Power BIレポート**: 高度な分析レポートの作成
- **KPI管理**: 設備稼働率、ダウンタイム、メンテナンスコストの可視化
- **トレンド分析**: 長期的なデータトレンドの分析

### 4. 画面や操作

#### 4.1 リアルタイム監視ダッシュボード
- **レイアウト**: グリッド形式での設備ステータス表示
- **操作**: ドリルダウンによる詳細情報表示、フィルタリング機能
- **更新頻度**: 1分間隔での自動更新

#### 4.2 設備詳細画面
- **表示項目**: センサーデータのリアルタイムグラフ、履歴データ
- **操作**: 時間範囲選択、閾値設定、アラート設定

#### 4.3 メンテナンス管理画面
- **カレンダー表示**: 予定・実績のスケジュール管理
- **操作**: 計画の作成・編集・削除、作業記録の入力

#### 4.4 アラート管理画面
- **一覧表示**: 発生中・解決済みアラートの管理
- **操作**: アラート確認、対応記録、エスカレーション

#### 4.5 レポート画面
- **Power BI統合**: 埋め込みレポートの表示
- **操作**: フィルタリング、データエクスポート

### 5. 外部サービスとのやり取り

#### 5.1 IoTプラットフォーム連携
- **Azure IoT Hub**: センサーデータの収集・管理
- **データフォーマット**: JSON形式でのリアルタイムデータ転送
- **通信プロトコル**: MQTT、HTTPS

#### 5.2 クラウドサービス連携
- **Azure Functions**: サーバーレスでのデータ処理
- **Azure Cosmos DB**: IoTデータのリアルタイム処理
- **Azure SQL Database**: マスターデータ・分析データの管理

#### 5.3 通知サービス連携
- **メール送信**: SMTP経由での異常通知
- **SMS送信**: 緊急時の即座通知
- **プッシュ通知**: モバイルアプリへの通知

#### 5.4 認証サービス連携
- **Azure Active Directory**: ユーザー認証・認可
- **シングルサインオン**: 既存の社内システムとの連携

### 6. 他のアプリケーションやサービスとの依存関係

#### 6.1 既存システムとの連携
- **生産管理システム**: 生産計画データの取得
- **在庫管理システム**: 部品在庫情報の参照
- **人事システム**: 作業者情報の参照

#### 6.2 データ分析基盤
- **Power BI**: レポート・ダッシュボード機能
- **Azure Monitor**: システム監視・ログ管理
- **Application Insights**: アプリケーション監視

#### 6.3 開発・運用基盤
- **Azure DevOps**: CI/CDパイプライン
- **GitHub**: ソースコード管理
- **Docker**: コンテナ化された実行環境

---

## 🔧 非機能要件

### 1. 可用性

#### システム稼働率
- **要件**: 99.9%以上の稼働率を維持
- **根拠**: ヒアリングより「止まらないようにしてほしい、休日も正月も」
- **対策**: 
  - Azure の高可用性サービスの活用
  - 冗長化構成によるフェイルオーバー機能
  - 24時間365日の監視体制

#### ダウンタイム対応
- **計画メンテナンス**: 月1回以下、各回4時間以内
- **緊急メンテナンス**: 年間合計8時間以内
- **障害復旧**: 重大障害からの復旧は4時間以内

#### バックアップ・復旧
- **データバックアップ**: 
  - 24時間365日いつでも復旧可能
  - 課金情報・予約情報の確実なバックアップ
  - RPO（Recovery Point Objective）: 1時間以内
  - RTO（Recovery Time Objective）: 4時間以内

### 2. 性能・拡張性

#### レスポンス時間
- **リアルタイムデータ表示**: 1秒以内
- **ダッシュボード読み込み**: 3秒以内
- **レポート生成**: 30秒以内
- **データ検索**: 5秒以内

#### 同時利用者数
- **要件**: 同時に10人程度の利用を想定
- **根拠**: ヒアリングより「同時に10人くらい捌ければいい」
- **拡張性**: 将来的な利用者増加に対応可能な設計

#### データ処理能力
- **IoTデータ**: 毎分1,000件のセンサーデータ処理
- **データ保存**: 年間1TB程度のデータ蓄積に対応
- **同時データベース接続**: 50接続まで対応

#### スケーラビリティ
- **水平スケーリング**: 利用者増加に応じたインスタンス追加
- **垂直スケーリング**: 処理能力向上のためのリソース拡張
- **自動スケーリング**: 負荷に応じた自動リソース調整

### 3. 運用・保守性

#### システム監視
- **監視項目**: 
  - アプリケーション応答時間
  - データベース性能
  - リソース使用率（CPU、メモリ、ストレージ）
  - エラー発生率
- **アラート設定**: 異常値検知時の自動通知
- **ログ管理**: 30日間のアプリケーションログ保持

#### メンテナンス作業
- **定期メンテナンス**: 月1回の定期点検
- **セキュリティアップデート**: 脆弱性対応の迅速実施
- **機能追加**: 
  - 後から機能を追加する可能性への対応
  - モジュラー設計による拡張性確保

#### サポート体制
- **平日サポート**: 9:00-18:00の技術サポート
- **緊急対応**: 24時間365日の障害対応
- **ユーザーサポート**: マニュアル提供、研修実施

#### データ管理
- **データ保持期間**: 
  - リアルタイムデータ: 3ヶ月
  - 履歴データ: 5年間
  - バックアップデータ: 7年間
- **データアーカイブ**: 古いデータの自動アーカイブ機能

### 4. 移行性

#### システム移行
- **現行システム**: 新規構築のため移行対象なし
- **データ移行**: 既存データがないため該当なし
- **段階的移行**: フェーズ毎の段階的な機能展開

#### 将来の移行対応
- **データエクスポート**: 標準フォーマット（CSV、JSON）での出力機能
- **API提供**: 他システムとの連携のためのREST API
- **ポータビリティ**: クラウドベンダー依存度の最小化

### 5. セキュリティ

#### 認証・認可
- **多要素認証**: Azure AD による強固な認証
- **アクセス制御**: ロールベースアクセス制御（RBAC）
- **セッション管理**: セキュアなセッション管理
- **個人情報保護**: 
  - 個人情報に近いところの厳密な管理
  - 個人情報へのアクセス制御とログ記録

#### データセキュリティ
- **データ暗号化**: 
  - 保存時暗号化（AES-256）
  - 転送時暗号化（TLS 1.3）
- **データベースセキュリティ**: 
  - アクセス制御とクエリ制限
  - データベース活動監視
- **バックアップセキュリティ**: 
  - 暗号化されたバックアップ
  - アクセス制御されたストレージ

#### ネットワークセキュリティ
- **ファイアウォール**: Azure NSG による通信制御
- **VPN接続**: 必要に応じたセキュアな接続
- **侵入検知**: 不正アクセスの監視・検知

#### コンプライアンス
- **監査ログ**: 全操作の詳細ログ記録と保持
- **GDPR対応**: 個人データ保護規則への準拠
- **セキュリティ監査**: 定期的なセキュリティ評価

### 6. 環境・サステナビリティ

#### 環境配慮
- **クラウドファースト**: 
  - エネルギー効率の高いクラウドサービス活用
  - 太陽光発電等の再生可能エネルギー利用可能なデータセンター選択
- **リソース最適化**: 
  - 自動スケーリングによる無駄なリソース消費の削減
  - 効率的なデータ処理アルゴリズムの採用

#### モバイル対応
- **スマートフォンアプリ**: 
  - ネイティブアプリまたはPWA（Progressive Web App）
  - 低消費電力設計
  - オフライン機能による通信量削減

#### 持続可能性
- **長期運用**: 5年以上の継続利用を前提とした設計
- **技術的負債の最小化**: 保守性を重視した実装
- **オープンスタンダード**: 標準技術の採用によるベンダーロックイン回避

---

## 📋 まとめ

本要件定義書では、工場設備管理アプリケーションに必要な機能要件と非機能要件を体系的に整理しました。

### 主要ポイント
- **包括的な機能**: リアルタイム監視から予知保全まで、設備管理に必要な全機能をカバー
- **高い可用性**: 99.9%の稼働率と24時間365日の復旧体制
- **拡張性**: 将来の機能追加と利用者増加への対応
- **セキュリティ**: 個人情報保護を含む包括的なセキュリティ対策
- **持続可能性**: 環境配慮と長期運用を考慮した設計

これらの要件に基づいて開発を進めることで、効率的で信頼性の高い工場設備管理システムの実現が可能となります。

**タスクが完了しました**